<mtx-grid
  [data]="tasks"
  [columns]="tableHeaders"
  [cellTemplate]="{tags: tagsTpl, startDate: startDateTpl, repeat: repeatTpl, status: statusTpl}"
  [showPaginator]="false"
  [pageOnFront]="false"
  [rowStriped]="true"
  [showToolbar]="false"
  [showColumnMenuButton]="false"
  [sortActive]="selectTaskWizardPaginationSort$ | async"
  [sortDirection]="selectTaskWizardPaginationIsSortDsc$ | async"
  (sortChange)="onSortTable($event)"
  noResultText="{{'No tasks found' | translate}}"
/>

<ng-template #tagsTpl let-row>
  <div class="d-flex flex-wrap align-items-center">
    <mat-chip-list>
      <mat-chip *ngFor="let tag of row.tags" color="primary" (click)="onClickTag(tag)">
        <mat-icon>discount</mat-icon>
        <span>{{ tag.name }}</span>
      </mat-chip>
    </mat-chip-list>
  </div>
</ng-template>

<ng-template #startDateTpl let-row>
  <span title="{{getFormattedStartDate(row)}}">{{getFormattedStartDate(row)}}</span>
</ng-template>

<ng-template #repeatTpl let-row>
  <ng-container *ngIf="row.repeatEvery === 0 && row.repeatType === RepeatTypeEnum.Day; else elseRepeatEveryTpl">
    <span title="{{RepeatTypeEnum[0] | translate}}">{{RepeatTypeEnum[0] | translate}}</span>
  </ng-container>
  <ng-template #elseRepeatEveryTpl>
    <span title="{{ row.repeatEvery }} {{RepeatTypeEnum[row.repeatType] | translate}}">{{ row.repeatEvery }} {{RepeatTypeEnum[row.repeatType] | translate}}</span>
  </ng-template>
</ng-template>

<ng-template #statusTpl let-row>
  <span title="{{TaskWizardStatusesEnum[row.status] | translate}}">{{TaskWizardStatusesEnum[row.status] | translate}}</span>
</ng-template>
