<eform-subheader>
  <div class="p-3">
    <button
      mdbBtn
      class="btn-success btn-icon"
      id="newDeviceUserBtn"
      *ngIf="userClaims.deviceUsersCreate"
      mdbTooltip="{{ 'Create new employee' | translate }}"
      (click)="createNewUserModal.show()"
      [placement]="'left'"
    >
      <fa-icon icon="plus" size="lg" [fixedWidth]="true"></fa-icon>
    </button>
  </div>
</eform-subheader>

<!--Here you can choose approach as you like: container-row, or flex, or just element with required styles and markup-->
<div class="container-fluid">
  <div class="row pl-1">
    <div class="col-md-2">
      <div class="md-form">
        <input
          mdbInput
          (ngModelChange)="onSearchChanged($event)"
          [ngModel]="propertyWorkersStateService.getNameFilter() | async"
          type="text"
          class="form-control"
          id="labelInput"
        />
        <label for="labelInput">{{ 'Search' | translate }}</label>
      </div>
    </div>
  </div>
  <div class="row p-1 table-responsive no-gutters">
    <table
      mdbTable
      striped="true"
      hover="true"
      small="true"
      class="z-depth-1 text-center"
    >
      <thead
        table-headers
        [tableHeaders]="tableHeaders"
        [sort]="propertyWorkersStateService.getSort() | async"
        (sortChanged)="sortTable($event)"
      ></thead>
      <tbody id="tableBody">
        <tr *ngFor="let siteDto of sitesDto">
          <td id="deviceUserId">{{ siteDto.siteId }}</td>
          <td id="deviceUserFullName">
            {{ siteDto.siteName }}
            <ng-container *ngIf="!siteDto.siteName"> N/A</ng-container>
          </td>
<!--          <td>-->
<!--            {{ siteDto.unitId }}-->
<!--            <ng-container *ngIf="!siteDto.unitId"> N/A</ng-container>-->
<!--          </td>-->
          <td id="deviceUserLanguage">
            {{ siteDto.language | translate }}
          </td>
          <td [innerHTML]="getWorkerPropertyNames(siteDto.siteId)"></td>
          <td>
            <div class="d-flex flex-row justify-content-center">
              <ng-container *ngIf="siteDto.customerNo && siteDto.otpCode">
                {{ siteDto.customerNo }} / {{ siteDto.otpCode }}
              </ng-container>
              <ng-container *ngIf="siteDto.otpCode == 0">
                <button
                  mdbBtn
                  class="btn-danger btn-icon mb-2"
                  *ngIf="userClaims.deviceUsersUpdate"
                  mdbTooltip="{{ 'New OTP' | translate }}"
                  (click)="openOtpModal(siteDto)"
                >
                  <fa-icon icon="key" size="lg" [fixedWidth]="true"></fa-icon>
                </button>
              </ng-container>
              <ng-container *ngIf="!siteDto.unitId"> N/A</ng-container>
            </div>
          </td>
          <td
            *ngIf="userClaims.deviceUsersDelete || userClaims.deviceUsersDelete"
          >
            <div class="d-flex flex-row justify-content-center">
              <button
                mdbBtn
                class="btn-accent text-black-50 btn-icon mb-2"
                mdbTooltip="{{ 'Edit assignments' | translate }}"
                mdbWavesEffect
                id="editAssignmentsBtn"
                [routerLink]="['/plugins/backend-configuration-pn/task-worker-assignments/' + siteDto.siteId]"
              >
                <fa-icon icon="eye" [fixedWidth]="true" size="lg"></fa-icon>
              </button>
              <button
                mdbBtn
                class="btn-accent text-black-50 btn-icon mb-2"
                *ngIf="userClaims.deviceUsersUpdate"
                mdbTooltip="{{ 'Edit Device User' | translate }}"
                mdbWavesEffect
                id="editDeviceUserBtn"
                (click)="openEditModal(siteDto)"
              >
                <fa-icon icon="pen" [fixedWidth]="true" size="lg"></fa-icon>
              </button>
              <button
                mdbBtn
                class="btn-danger btn-icon mb-2"
                *ngIf="userClaims.deviceUsersDelete"
                mdbTooltip="{{ 'Delete Device User' | translate }}"
                id="deleteDeviceUserBtn"
                (click)="openDeleteDeviceUserModal(siteDto)"
              >
                <fa-icon
                  icon="trash-alt"
                  [fixedWidth]="true"
                  size="lg"
                ></fa-icon>
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <app-property-worker-otp-modal
    (onNewOtpRequested)="getDeviceUsersFiltered()"
    [selectedSimpleSite]="selectedSimpleSiteDto"
    #newOtpModal
  ></app-property-worker-otp-modal>
  <app-property-worker-delete-modal
    [selectedDeviceUser]="selectedSimpleSiteDto"
    (onUserDeleted)="getDeviceUsersFiltered()"
    #deleteDeviceUserModal
  ></app-property-worker-delete-modal>
  <app-property-worker-create-modal
    [availableProperties]="availableProperties"
    (deviceUserCreated)="getDeviceUsersFiltered()"
    #createNewUserModal
  ></app-property-worker-create-modal>
  <app-edit-device-user-modal
    (userUpdated)="getDeviceUsersFiltered()"
    [availableProperties]="availableProperties"
    #editDeviceUserModal
  ></app-edit-device-user-modal>
</div>
