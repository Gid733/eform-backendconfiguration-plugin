<eform-new-subheader [title]="'Task management' | translate">
  <button
    mat-icon-button
    id="createNewTaskBtn"
    color="accent"
    matTooltip="{{ 'Create new task' | translate }}"
    (click)="openCreateModal()"
  >
    <mat-icon>add</mat-icon>
  </button>
</eform-new-subheader>

<div class="d-flex flex-column">
  <app-task-management-filters></app-task-management-filters>
  <div class="d-flex flex-row align-items-center">
    <button
      mat-raised-button
      id="showReportBtn"
      color="accent"
      [disabled]="taskManagementStateService.getDisabledButtonsAsync() | async"
      (click)="updateTable()"
    >
      {{ 'Show report' | translate }}
    </button>
    <button
      *ngIf="taskManagementStateService.store.getValue().filters.propertyId !== -1"
      mat-icon-button
      id="wordBtn"
      color="primary"
      [disabled]="taskManagementStateService.getDisabledButtonsAsync() | async"
      (click)="onDownloadWordReport()"
      matTooltip="{{ 'Word report' | translate }}"
    >
      <mat-icon svgIcon="file-word"></mat-icon>
    </button>
    <button
      *ngIf="taskManagementStateService.store.getValue().filters.propertyId !== -1"
      mat-icon-button
      id="excelBtn"
      color="accent"
      [disabled]="taskManagementStateService.getDisabledButtonsAsync() | async"
      (click)="onDownloadExcelReport()"
      matTooltip="{{ 'Excel report' | translate }}"
    >
      <mat-icon svgIcon="file-excel"></mat-icon>
    </button>
  </div>
  <app-task-management-table
  [workOrderCases]="workOrderCases"
  (openViewModal)="openViewModal($event)"
  (updateTable)="taskManagementStateService.getDisabledButtons ? updateTable() : undefined"
  (openDeleteModal)="openDeleteModal($event)">
  </app-task-management-table>
</div>
