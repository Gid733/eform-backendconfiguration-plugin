<!--<mtx-grid
  [data]="tasks"
  [columns]="tableHeaders"
  [showPaginator]="false"
  [pageOnFront]="false"
  [rowStriped]="true"
  [showToolbar]="false"
  [showColumnMenuButton]="false">
</mtx-grid>-->


<div class="mtx-grid">
  <div class="mtx-grid-main mtx-grid-layout">
    <div class="mtx-grid-content mtx-grid-layout">
      <div class="mat-table-container mat-table-with-data">
        <table class="mat-table cdk-table mat-table-striped" style="width: 100%">
          <thead role="rowgroup">
          <tr class="mat-header-row cdk-header-row">
            <th role="columnheader"
                class="mat-header-cell cdk-header-cell mat-table-sticky mat-table-sticky-border-elem-top"
                [attr.colspan]="enabledHeadersNumber"></th>
            <th role="columnheader"
                class="mat-header-cell cdk-header-cell mat-table-sticky mat-table-sticky-border-elem-top weeks"
                *ngFor="let week of weeks" [attr.colspan]="week.length">{{ 'Week' | translate}} {{week.weekNumber}}</th>
          </tr>
          <tr role="rowgroup" class="mat-header-row cdk-header-row">
            <th role="columnheader"
                class="mat-header-cell cdk-header-cell mat-table-sticky mat-table-sticky-border-elem-top"
                [attr.colspan]="enabledHeadersNumber"></th>
            <th role="columnheader"
                class="mat-header-cell cdk-header-cell mat-table-sticky mat-table-sticky-border-elem-top days"
                *ngFor="let day of daysInTable" [attr.colspan]="1">{{day}}</th>
          </tr>
          <tr role="rowgroup" class="mat-header-row cdk-header-row">
            <th role="columnheader"
                class="mat-header-cell cdk-header-cell mat-table-sticky mat-table-sticky-border-elem-top property"
                *ngIf="propertyHeaderEnabled && columnsFromDb.property">{{ 'Property' | translate}}</th>
            <th role="columnheader"
                class="mat-header-cell cdk-header-cell mat-table-sticky mat-table-sticky-border-elem-top task"
                *ngIf="columnsFromDb.task">{{ 'Task' | translate }}</th>
            <th role="columnheader"
                class="mat-header-cell cdk-header-cell mat-table-sticky mat-table-sticky-border-elem-top tags"
                *ngIf="columnsFromDb.tags">{{ 'Tags' | translate }}</th>
            <th role="columnheader"
                class="mat-header-cell cdk-header-cell mat-table-sticky mat-table-sticky-border-elem-top workers"
                *ngIf="columnsFromDb.workers">{{ 'Workers' | translate }}</th>
            <th role="columnheader"
                class="mat-header-cell cdk-header-cell mat-table-sticky mat-table-sticky-border-elem-top start"
                *ngIf="columnsFromDb.start">{{ 'Start' | translate }}</th>
            <th role="columnheader"
                class="mat-header-cell cdk-header-cell mat-table-sticky mat-table-sticky-border-elem-top repeat"
                *ngIf="columnsFromDb.repeat">{{ 'Repeat' | translate }}</th>
            <th role="columnheader"
                class="mat-header-cell cdk-header-cell mat-table-sticky mat-table-sticky-border-elem-top deadline"
                *ngIf="columnsFromDb.deadline">{{ 'Deadline' | translate }}</th>
            <th role="columnheader"
                class="mat-header-cell cdk-header-cell mat-table-sticky mat-table-sticky-border-elem-top days-of-week 'task-day-{{day}}'"
                *ngFor="let day of daysInTable" [attr.colspan]="1">{{'dayOfWeeks.short.'+getDayOfWeekByDay(day)|translate}}</th>
          </tr>
          </thead>
          <tbody id="" role="rowgroup">
          <ng-container *ngFor="let task of tasks; let i = index">
            <tr class="mat-row cdk-row {{i%2 ? 'mat-row-odd' : ''}}">
              <td role="cell" class="mat-cell cdk-cell property"
                  *ngIf="columnsFromDb.property && propertyHeaderEnabled">{{task.property || '--'}}</td>
              <td role="cell" class="mat-cell cdk-cell task" *ngIf="columnsFromDb.task">{{task.taskName || '--'}}</td>
              <td role="cell" class="mat-cell cdk-cell tags" *ngIf="columnsFromDb.tags">{{task.tags || '--'}}</td>
              <td role="cell" class="mat-cell cdk-cell worker" *ngIf="columnsFromDb.workers">
                <span class="worker-name" *ngFor="let worker of task.workers; last as last">{{worker + (last ? '' : ', ') || '--'}}</span>
              </td>
              <td role="cell" class="mat-cell cdk-cell startTask"
                  *ngIf="columnsFromDb.start">{{(task.startTask | date:'dd.MM.yyyy') || '--'}}</td>
              <td role="cell" class="mat-cell cdk-cell text-nowrap repeat"
                  *ngIf="columnsFromDb.repeat">{{getRepeatEveryAndRepeatTypeByTask(task) || '--'}}</td>
              <td role="cell" class="mat-cell cdk-cell deadlineTask"
                  *ngIf="columnsFromDb.deadline">{{(task.deadlineTask | date:'dd.MM.yyyy') || '--'}}</td>
              <td role="cell" class="mat-cell cdk-cell tasks" [ngClass]="[getColorByDayAndTask(day, task), 'task-day-' + day]"
                  *ngFor="let day of daysInTable"></td>
            </tr>
          </ng-container>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
